!function(e){function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}var n={};o.m=e,o.c=n,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:t})},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},o.p="",o(o.s=0)}([function(e,o){const n=[{token:"undef",foreground:"FF0000"},{token:"comment",foreground:"008800"},{token:"sfunc",foreground:"FF909B"},{token:"func",foreground:"FF909B"},{token:"instr",foreground:"bf00ff",fontStyle:"bold"},{token:"macro",foreground:"7CFC00"},{token:"macroIndicator",foreground:"bf00ff"},{token:"inc",foreground:"7CFC00"},{token:"incPath",foreground:"87CEFA"},{token:"degree",foreground:"00FFFF"},{token:"pitOp-chord",foreground:"00BBFF"},{token:"durOp-stac-volOp",foreground:"00FFBB"},{token:"chordBracket",foreground:"00BBBB"},{token:"@bracket",foreground:"fc8f00"},{token:"volta",foreground:"FFFF00"},{token:"barline",foreground:"fc8f00"},{token:"repeat",foreground:"FFFF00"},{token:"press-release",foreground:"fcde00"},{token:"tie",foreground:"fcde00"}];let t;window.onload=function(){window.require.config({paths:{vs:"vs"}}),window.require(["vs/editor/editor.main"],function(){window.monaco=monaco}),this.document.getElementById("color").value='[\n    { "token": "undef", "foreground": "FF0000" },\n    { "token": "comment", "foreground": "008800" },\n\n    { "token": "sfunc", "foreground": "FF909B" },\n    { "token": "func", "foreground": "FF909B" },\n    { "token": "instr", "foreground": "bf00ff", "fontStyle": "bold" },\n    { "token": "macro", "foreground": "7CFC00" },\n    { "token": "macroIndicator", "foreground": "bf00ff" },\n    { "token": "inc", "foreground": "7CFC00" },\n    { "token": "incPath", "foreground": "87CEFA" },\n\n    { "token": "degree", "foreground": "00FFFF" },\n    { "token": "pitOp-chord", "foreground": "00BBFF" },\n    { "token": "durOp-stac-volOp", "foreground": "00FFBB" },\n    { "token": "chordBracket", "foreground": "00BBBB" },\n\n    { "token": "@bracket", "foreground": "fc8f00" },\n    { "token": "volta", "foreground": "FFFF00" },\n    { "token": "barline", "foreground": "fc8f00" },\n    { "token": "repeat", "foreground": "FFFF00" },\n    { "token": "press-release", "foreground": "fcde00" },\n    { "token": "tie", "foreground": "fcde00" }\n]',document.getElementById("gen").onclick=(()=>{try{t=JSON.parse(this.document.getElementById("color").value)}catch(e){alert("Invalid json!"),t=n}monaco.languages.register({id:"smml",extensions:["sml"]}),monaco.editor.defineTheme("smml",{base:"vs-dark",inherit:!0,rules:t,colors:{}}),monaco.languages.setMonarchTokensProvider("smml",{tokenizer:{root:[{regex:/\/\/.*/,action:{token:"comment"}},{regex:/# *Track/,action:{token:"@rematch",next:"Macro"}},{regex:/# *Chord/,action:{token:"@rematch",next:"ChordDef"}},{regex:/# *Include/,action:{token:"@rematch",next:"@Inc"}},{regex:/<\*[a-z]+\*>/,action:{token:"@rematch",next:"@pop"}},{regex:/# *End/,action:{token:"@rematch",next:"@pop"}},{regex:/@[a-z]+/,action:{token:"macroIndicator"}},{regex:/\[(\d\.)+\]/,action:{token:"volta"}},{regex:/:\|\|:|:\|\||\|\|:|\|\||\|/,action:{token:"barline"}},{regex:/\d+\*|\/\d*:/,action:{token:"repeat"}},{regex:/&/,action:{token:"press-release"}},{regex:/\*/,action:{token:"press-release"}},{regex:/\^/,action:{token:"tie"}},{regex:/{/,action:{bracket:"@open",token:"@bracket"}},{regex:/}/,action:{bracket:"@close",token:"@bracket"}},{regex:/\([^\)]+\)/,action:{token:"sfunc"}},{regex:/([A-Z][a-z]+)+\([^\)]+\)/,action:{token:"func"}},{regex:/<[^*]+>/,action:{token:"instr"}},{regex:/[\d%]/,action:{token:"degree",next:"NoteOp"}},{regex:/\[/,action:{token:"@rematch",next:"Chord"}}],NoteOp:[{regex:/[^',b#a-zA-Z\-_\.=`:>]/,action:{token:"@rematch",next:"@pop"}},{regex:/[',b#a-zA-Z]/,action:{token:"pitOp-chord"}},{regex:/[\-_\.=`:>]/,action:{token:"durOp-stac-volOp"}}],Chord:[{regex:/\[/,action:{token:"@rematch",next:"ChordInside"}},{regex:/[',b#a-zA-Z]/,action:{token:"pitOp-chord"}},{regex:/[^',b#a-zA-Z\-_\.=`:>]/,action:{token:"@rematch",next:"@pop"}},{regex:/[\-_\.=`:>]/,action:{token:"durOp-stac-volOp"}}],ChordInside:[{regex:/\[/,action:{token:"chordBracket"}},{regex:/[\d%]/,action:{token:"degree"}},{regex:/[',b#a-zA-Z]/,action:{token:"pitOp-chord"}},{regex:/\]/,action:{token:"chordBracket",next:"@pop"}}],ChordDef:[{regex:/# *Chord/,action:{token:"macro",bracket:"@open"}},{regex:/# *End/,action:{token:"macro",bracket:"@close",next:"@pop"}},{regex:/^.+$/,action:{token:"@rematch",next:"ChordDefLine"}}],ChordDefLine:[{regex:/^[a-zA-Z]/,action:{token:"pitOp-chord"}},{regex:/\t+[^\t]+\t+/,action:{token:"comment"}},{regex:/.*/,action:{token:"pitOp-chord",next:"@pop"}}],Macro:[{regex:/# *Track/,action:{token:"macro",bracket:"@open"}},{regex:/<\*[a-z]+\*>/,action:{token:"macroIndicator",next:"root"}},{regex:/# *End/,action:{token:"macro",bracket:"@close",next:"@pop"}}],Inc:[{regex:/# *Include/,action:{token:"inc"}},{regex:/".*"/,action:{token:"incPath",next:"@pop"}}],Section:[],Track:[]},tokenPostfix:".sml",defaultToken:"undef"}),monaco.languages.registerDefinitionProvider("smml",{provideDefinition(e,o,n){const t=e.findMatches("@[a-z]+",!1,!0,!1,"",!0).find(e=>e.range.startLineNumber===o.lineNumber&&e.range.endLineNumber===o.lineNumber&&e.range.startColumn<=o.column&&e.range.endColumn>=o.column);if(!t)return;const r=e.findMatches(`<*${t.matches[0].slice(1)}*>`,!1,!1,!0,"",!1)[0];return{uri:e.uri,range:r.range}}}),monaco.languages.registerCompletionItemProvider("smml",{triggerCharacters:["<"],provideCompletionItems:(e,o,n)=>"<"===e.getValueInRange({startLineNumber:o.lineNumber,endLineNumber:o.lineNumber,startColumn:o.column-1,endColumn:o.column})?[{label:"Piano",kind:monaco.languages.CompletionItemKind.Variable,documentation:"Piano",insertText:"Piano>"}]:[]}),function(){document.body.innerHTML="";const e=document.createElement("div");e.id="container",e.style.width="100%",e.style.height="100%",e.style.overflow="hidden",document.body.appendChild(e);const o=monaco.editor.create(e,{language:"smml",theme:"smml",folding:!0});window.editor=o,window.onresize=(()=>{o.layout()})}()})}}]);