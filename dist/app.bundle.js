!function(e){function n(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var o={};n.m=e,n.c=o,n.d=function(e,o,t){n.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:t})},n.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(o,"a",o),o},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=0)}([function(e,n){const o=[{token:"undef",foreground:"FF0000"},{token:"comment",foreground:"008800"},{token:"sfunc",foreground:"FF909B"},{token:"func",foreground:"FF909B"},{token:"instr",foreground:"bf00ff",fontStyle:"bold"},{token:"macro",foreground:"7CFC00"},{token:"macroIndicator",foreground:"bf00ff"},{token:"inc",foreground:"7CFC00"},{token:"incPath",foreground:"87CEFA"},{token:"degree",foreground:"00FFFF"},{token:"pitOp-chord",foreground:"00BBFF"},{token:"durOp-stac-volOp",foreground:"00FFBB"},{token:"chordBracket",foreground:"00BBBB"},{token:"@bracket",foreground:"fc8f00"},{token:"volta",foreground:"FFFF00"},{token:"barline",foreground:"fc8f00"},{token:"repeat",foreground:"FFFF00"},{token:"press-release",foreground:"fcde00"},{token:"tie",foreground:"fcde00"}];let t;window.onload=function(){window.require.config({paths:{vs:"vs"}}),window.require(["vs/editor/editor.main"],function(){window.monaco=monaco,this.document.getElementById("color").value='[\n    { "token": "undef", "foreground": "FF0000" },\n    { "token": "comment", "foreground": "008800" },\n\n    { "token": "sfunc", "foreground": "FF909B" },\n    { "token": "func", "foreground": "FF909B" },\n    { "token": "instr", "foreground": "bf00ff", "fontStyle": "bold" },\n    { "token": "macro", "foreground": "7CFC00" },\n    { "token": "macroIndicator", "foreground": "bf00ff" },\n    { "token": "inc", "foreground": "7CFC00" },\n    { "token": "incPath", "foreground": "87CEFA" },\n\n    { "token": "degree", "foreground": "00FFFF" },\n    { "token": "pitOp-chord", "foreground": "00BBFF" },\n    { "token": "durOp-stac-volOp", "foreground": "00FFBB" },\n    { "token": "chordBracket", "foreground": "00BBBB" },\n\n    { "token": "@bracket", "foreground": "fc8f00" },\n    { "token": "volta", "foreground": "FFFF00" },\n    { "token": "barline", "foreground": "fc8f00" },\n    { "token": "repeat", "foreground": "FFFF00" },\n    { "token": "press-release", "foreground": "fcde00" },\n    { "token": "tie", "foreground": "fcde00" }\n]',document.getElementById("gen").onclick=(()=>{try{t=JSON.parse(this.document.getElementById("color").value)}catch(e){alert("Invalid json!"),t=o}monaco.languages.register({id:"smml",extensions:["sml"]}),monaco.editor.defineTheme("smml",{base:"vs-dark",inherit:!0,rules:t,colors:{}}),monaco.languages.setMonarchTokensProvider("smml",{tokenizer:{root:[{regex:/\/\/.*/,action:{token:"comment"}},{regex:/# *Track/,action:{token:"@rematch",next:"Macro"}},{regex:/# *Chord/,action:{token:"@rematch",next:"ChordDef"}},{regex:/# *Include/,action:{token:"@rematch",next:"@Inc"}},{regex:/\[(\d+\.)+\]/,action:{token:"volta"}},{regex:/<[^*]+>/,action:{token:"instr"}},{include:"Common"}],Subtrack:[{regex:/\d+\*|\/\d*:/,action:{token:"repeat"}},{regex:/\//,action:{token:"repeat"}},{regex:/\^\)|\)/,action:{token:"@rematch",next:"@pop"}},{include:"Common"}],Common:[{regex:/@[a-z]+/,action:{token:"macroIndicator"}},{regex:/(\$?)([\d%x])/,action:[{token:"func"},{cases:{"@eos":{token:"degree"},"@default":{token:"degree",next:"NoteOp"}}}]},{regex:/(\$?)(\[)/,action:[{token:"func"},{token:"@rematch",next:"Chord"}]},{regex:/\(/,action:{token:"@rematch",next:"Sfunc"}},{regex:/([A-Z][a-z]+)+\(/,action:{token:"@rematch",next:"Func"}},{regex:/{/,action:{bracket:"@open",token:"@bracket",next:"Subtrack"}},{regex:/}/,action:{bracket:"@close",token:"@bracket",next:"@pop"}},{regex:/&/,action:{token:"press-release"}},{regex:/\*/,action:{token:"press-release"}},{regex:/~/,action:{token:"func"}},{regex:/\^/,action:{token:"tie"}},{regex:/:\|\|:|:\|\||\|\|:|\|\||\|/,action:{token:"barline"}}],Sfunc:[{regex:/\(\.\)/,action:{token:"func",next:"@pop"}},{regex:/\(\^/,action:{token:"func",next:"Subtrack"}},{regex:/\(|\^|:|1=/,action:{token:"func"}},{regex:/{/,action:{token:"@bracket",next:"Subtrack"}},{regex:/[^\)]+\^\)/,action:{token:"@rematch",next:"Subtrack"}},{regex:/\^\)/,action:{token:"func",next:"@pop"}},{regex:/\)/,action:{token:"func",next:"@pop"}},{regex:/[A-Za-zb#%\d\.\-\/]/,action:{token:"number"}}],Func:[{regex:/[A-Z][a-z]+/,action:{token:"func"}},{regex:/\(/,action:{token:"func",next:"Arg"}},{regex:/\)/,action:{token:"func",next:"@pop"}},{regex:/,\s*/,action:{token:"func",next:"Arg"}}],Array:[{regex:/\[/,action:{token:"func",bracket:"@open",next:"Arg"}},{regex:/,\s*/,action:{token:"func",next:"Arg"}},{regex:/\]/,action:{token:"func",bracket:"@close",next:"@pop"}}],Arg:[{regex:/{/,action:{token:"@bracket",next:"Subtrack"}},{regex:/"[^"]*"/,action:{token:"string"}},{regex:/\[/,action:{token:"@rematch",next:"Array"}},{regex:/,|\)|\]/,action:{token:"@rematch",next:"@pop"}},{regex:/[^,\)}\[\]"]+/,action:{token:"number"}}],NoteOp:[{regex:/[^',b#a-zA-Z\-_\.=`:>]/,action:{token:"@rematch",next:"@pop"}},{include:"NoteAddon"}],NoteAddon:[{regex:/[',b#a-zA-Z]/,action:{cases:{"@eos":{token:"pitOp-chord",next:"@pop"},"@default":{token:"pitOp-chord"}}}},{regex:/[\-_\.=`:>]/,action:{cases:{"@eos":{token:"durOp-stac-volOp",next:"@pop"},"@default":{token:"durOp-stac-volOp"}}}}],Chord:[{regex:/\[/,action:{token:"@rematch",next:"ChordInside"}},{regex:/[^',b#a-zA-Z\-_\.=`:>]/,action:{token:"@rematch",next:"@pop"}},{include:"NoteAddon"}],ChordInside:[{regex:/\[/,action:{token:"chordBracket"}},{regex:/[\d%]/,action:{token:"degree"}},{regex:/[',b#a-zA-Z]/,action:{token:"pitOp-chord"}},{regex:/\]/,action:{token:"chordBracket",next:"@pop"}}],ChordDef:[{regex:/# *Chord/,action:{token:"macro",bracket:"@open"}},{regex:/# *End/,action:{token:"macro",bracket:"@close",next:"@pop"}},{regex:/^.+$/,action:{token:"@rematch",next:"ChordDefLine"}}],ChordDefLine:[{regex:/^[a-zA-Z]/,action:{token:"pitOp-chord"}},{regex:/\t+[^\t]+\t+/,action:{token:"comment"}},{regex:/.*/,action:{token:"pitOp-chord",next:"@pop"}}],Macro:[{regex:/# *Track/,action:{token:"macro",bracket:"@open"}},{regex:/<\*[A-Za-z\d]+\*>/,action:{token:"macroIndicator"}},{regex:/# *End/,action:{token:"macro",bracket:"@close",next:"@pop"}},{include:"Common"}],Inc:[{regex:/# *Include/,action:{token:"inc"}},{regex:/".*"/,action:{token:"incPath",next:"@pop"}}],Section:[],Track:[]},tokenPostfix:".sml",defaultToken:"undef"}),monaco.languages.registerDefinitionProvider("smml",{provideDefinition(e,n,o){const t=e.findMatches("@[a-z]+",!1,!0,!1,"",!0).find(e=>e.range.startLineNumber===n.lineNumber&&e.range.endLineNumber===n.lineNumber&&e.range.startColumn<=n.column&&e.range.endColumn>=n.column);if(!t)return;const r=e.findMatches(`<*${t.matches[0].slice(1)}*>`,!1,!1,!0,"",!1)[0];return{uri:e.uri,range:r.range}}}),monaco.languages.registerCompletionItemProvider("smml",{triggerCharacters:["<"],provideCompletionItems:(e,n,o)=>"<"===e.getValueInRange({startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:n.column-1,endColumn:n.column})?[{label:"Piano",kind:monaco.languages.CompletionItemKind.Variable,documentation:"Piano",insertText:"Piano>"}]:[]}),function(){document.body.innerHTML="";const e=document.createElement("div");e.id="container",e.style.width="100%",e.style.height="100%",e.style.overflow="hidden",document.body.appendChild(e);const n=monaco.editor.create(e,{language:"smml",theme:"smml",folding:!0});window.editor=n,window.onresize=(()=>{n.layout()})}()})})}}]);